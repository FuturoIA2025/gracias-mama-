<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Para MamÃ¡ ðŸ’–</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }

    canvas {
      display: block;
    }

    .frase {
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      font-size: 2.2em;
      font-family: 'Segoe UI', sans-serif;
      color: #ff66cc;
      text-shadow: 0 0 15px #ff99cc, 0 0 30px #ff33aa;
      opacity: 0;
      transition: opacity 0.5s ease;
      padding: 0 20px;
    }

    #playMusicBtn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #ff66cc;
      color: white;
      border: none;
      border-radius: 20px;
      padding: 12px 20px;
      font-size: 1em;
      font-family: 'Segoe UI', sans-serif;
      cursor: pointer;
      box-shadow: 0 0 10px #ff99cc, 0 0 20px #ff33aa;
      z-index: 10;
    }

    #playMusicBtn:hover {
      background: #ff33aa;
    }
  </style>
</head>
<body>
  <div id="frase" class="frase"></div>
  <button id="playMusicBtn">ðŸŽµ Toca para escuchar</button>

  <audio id="bg-music" loop>
    <source src="madre.mp3" type="audio/mp3">
  </audio>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

  <script>
    const music = document.getElementById("bg-music");
    document.body.addEventListener("click", () => {
      music.play().catch(err => console.log("Error al reproducir:", err));
    }, { once: true });

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 60;

    const renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Estrellas
    const starGeometry = new THREE.BufferGeometry();
    const starPositions = [];
    for (let i = 0; i < 2000; i++) {
      starPositions.push((Math.random() - 0.5) * 600);
      starPositions.push((Math.random() - 0.5) * 600);
      starPositions.push((Math.random() - 0.5) * 600);
    }
    starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starPositions, 3));
    const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 1 });
    const stars = new THREE.Points(starGeometry, starMaterial);
    scene.add(stars);

    // PartÃ­culas rosadas
    const geometry = new THREE.BufferGeometry();
    const positions = [];
    for (let i = 0; i < 3000; i++) {
      positions.push((Math.random() - 0.5) * 200);
      positions.push(-120 + Math.random() * 20);
      positions.push((Math.random() - 0.5) * 200);
    }
    geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
    const material = new THREE.PointsMaterial({ color: 0xff66cc, size: 1.8 });
    const points = new THREE.Points(geometry, material);
    scene.add(points);

    // Coordenadas corazÃ³n
    const heartPositions = [];
    for (let t = 0; t < Math.PI * 2; t += 0.02) {
      const x = 16 * Math.pow(Math.sin(t), 3);
      const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
      heartPositions.push({x: x*2, y: y*2, z: (Math.random()-0.5)*30});
    }

    const frases = [
      "Gracias por darme la vida, mamÃ¡... todo lo que soy naciÃ³ contigo.",
      "Tu nombre vive en cada lÃ­nea de cÃ³digo que escribo, en cada sueÃ±o que construyo. Yuveli CÃ³rdobaâ€¦ tÃº eres mi motor.",
      "Aunque hoy la distancia nos separe, quiero que sepas que no hay un solo dÃ­a que no piense en ti.",
      "Estoy levantando un imperio, pero no por egoâ€¦ sino para que un dÃ­a tÃº no necesites nada, solo descansar, sonreÃ­r y ser feliz.",
      "TÃº me enseÃ±aste a nunca rendirme, y ahora, aunque el mundo a veces me ignoreâ€¦ sigo de pie, porque tÃº me hiciste fuerte.",
      "No tengo todo aÃºn, pero tengo el propÃ³sito mÃ¡s poderoso: hacer que vivas como una reina, como mereces.",
      "Cada sacrificio que hago, cada noche sin dormir, cada lÃ­nea que escriboâ€¦ todo es para ti, mamÃ¡.",
      "VendrÃ¡n dÃ­as de gloria, y cuando lleguen, tÃº estarÃ¡s al centro de todo. SerÃ¡s la reina del legado que hoy estoy sembrando.",
      "No necesito aplausos. No necesito fama. Solo quiero ver tus ojos brillar cuando te diga: â€˜MamÃ¡, lo logrÃ©â€¦ y esto es para ti.â€™",
      "TÃº creaste a un guerrero, mamÃ¡. Y este guerrero nunca se rinde. Porque tiene una reina que lo espera."
    ];

    const divFrase = document.getElementById("frase");

    function mostrarFrase(frase, callback) {
      let i = 0;
      divFrase.innerHTML = "";
      divFrase.style.opacity = 1;
      const interval = setInterval(() => {
        divFrase.innerHTML += frase.charAt(i);
        i++;
        if (i === frase.length) {
          clearInterval(interval);
          setTimeout(() => {
            divFrase.style.opacity = 0;
            setTimeout(callback, 1000);
          }, 4500);
        }
      }, 50);
    }

    setTimeout(() => {
      const pos = points.geometry.attributes.position;
      for (let i = 0; i < heartPositions.length && i*3 < pos.count*3; i++) {
        gsap.to(pos.array, {
          [i*3]: heartPositions[i].x,
          [i*3+1]: heartPositions[i].y,
          [i*3+2]: heartPositions[i].z,
          duration: 6,
          ease: "power2.out",
          onUpdate: () => pos.needsUpdate = true
        });
      }

      let index = 0;
      function cicloFrases() {
        mostrarFrase(frases[index], () => {
          index = (index + 1) % frases.length;
          cicloFrases();
        });
      }
      cicloFrases();

    }, 2000);

    function animate() {
      requestAnimationFrame(animate);
      points.rotation.y += 0.002;
      stars.rotation.y += 0.0005;
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
